{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api';\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst fetchBtn = document.querySelector('.load-more');\n\nconst perPage = 40;\nconst totalHits = 500;\nlet currentPage = 1;\nlet searchQuery = '';\nconst totalImages = Math.ceil(totalHits / perPage);\n\nlet clearImagesOnSearch = true;\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  document.querySelector('.form').addEventListener('submit', function (event) {\n    event.preventDefault();\n\n    loader.style.display = 'block';\n\n    // Оновлення значення searchQuery\n    searchQuery = document.querySelector('.input').value;\n\n    currentPage = 1;\n    clearImagesOnSearch = true;\n    searchImages(searchQuery);\n  });\n});\n\nfetchBtn.addEventListener('click', async () => {\n  loader.style.display = 'block';\n  clearImagesOnSearch = false;\n  searchImages(searchQuery);\n});\n\nasync function searchImages(query) {\n  const searchParams = {\n    key: '41530173-f95b78bdec41263a85620f647',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: perPage,\n    page: currentPage,\n  };\n\n  try {\n    const response = await axios.get(\n      `${BASE_URL}/?${new URLSearchParams(searchParams)}`\n    );\n\n    displayImages(response.data, perPage);\n    updateLoadMoreButtonVisibility(response.data, perPage);\n  } catch (error) {\n    showErrorToast();\n  } finally {\n    loader.style.display = 'none';\n    loader.classList.remove('loader--active');\n  }\n\n  function displayImages(data, perPage) {\n    if (data.hits.length > 0) {\n      if (clearImagesOnSearch) {\n        galleryContainer.innerHTML = '';\n      }\n\n      const imageCards = data.hits.map(image => {\n        const card = document.createElement('div');\n        card.classList.add('card');\n\n        const largeImageLink = document.createElement('a');\n        largeImageLink.href = image.largeImageURL;\n        largeImageLink.dataset.lightbox = 'gallery';\n\n        const img = document.createElement('img');\n        img.src = image.webformatURL;\n        img.alt = image.tags;\n\n        largeImageLink.appendChild(img);\n\n        card.appendChild(largeImageLink);\n\n        const details = document.createElement('div');\n        details.classList.add('details');\n\n        const likes = document.createElement('p');\n        likes.textContent = `Likes: ${image.likes}`;\n        details.appendChild(likes);\n\n        const views = document.createElement('p');\n        views.textContent = `Views: ${image.views}`;\n        details.appendChild(views);\n\n        const comments = document.createElement('p');\n        comments.textContent = `Comments: ${image.comments}`;\n        details.appendChild(comments);\n\n        const downloads = document.createElement('p');\n        downloads.textContent = `Downloads: ${image.downloads}`;\n        details.appendChild(downloads);\n\n        card.appendChild(details);\n\n        return card.outerHTML;\n      });\n\n      galleryContainer.insertAdjacentHTML('beforeend', imageCards.join(''));\n\n      const lightbox = new SimpleLightbox('.gallery a', {});\n      lightbox.refresh();\n\n      document.querySelector('.load-more').style.display = 'block';\n\n      if (\n        data.hits.length < perPage ||\n        currentPage * perPage >= data.totalHits\n      ) {\n        fetchBtn.style.display = 'none';\n      }\n      if (currentPage * perPage >= data.totalHits) {\n        showInfoToast();\n      }\n      currentPage += 1; // додаю сторінку при натисканні на кнопку\n    } else {\n      showNoImagesFoundToast();\n\n      fetchBtn.style.display = 'none';\n    }\n    // Отримання висоти однієї карточки галереї\n    const cardHeight = document\n      .querySelector('.card')\n      .getBoundingClientRect().height;\n\n    // Плавна прокрутка сторінки на дві висоти карточки галереї\n    window.scrollBy({\n      top: cardHeight * 2, // Прокрутити на дві висоти карточки\n      behavior: 'smooth', // Зробити прокрутку плавною\n    });\n  }\n  function updateLoadMoreButtonVisibility(data, perPage) {\n    const loadMoreButton = document.querySelector('.load-more');\n    loadMoreButton.style.display = 'block';\n\n    if (data.hits.length < perPage || currentPage * perPage >= data.totalHits) {\n      loadMoreButton.style.display = 'none';\n    }\n  }\n}\n\nfunction showInfoToast() {\n  iziToast.info({\n    title: 'End of Search Results',\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n}\n\nfunction showErrorToast() {\n  iziToast.error({\n    title: 'Error',\n    message: 'An error occurred. Please try again later.',\n  });\n}\n\nfunction showNoImagesFoundToast() {\n  iziToast.info({\n    title: 'No Images Found',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n"],"names":["BASE_URL","galleryContainer","loader","fetchBtn","perPage","currentPage","searchQuery","clearImagesOnSearch","event","searchImages","query","searchParams","response","axios","displayImages","updateLoadMoreButtonVisibility","showErrorToast","data","imageCards","image","card","largeImageLink","img","details","likes","views","comments","downloads","SimpleLightbox","showInfoToast","showNoImagesFoundToast","cardHeight","loadMoreButton","iziToast"],"mappings":"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"}